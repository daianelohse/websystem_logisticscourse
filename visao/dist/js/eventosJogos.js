function abrirJogo(o){$.ajax({type:"GET",url:"modalJogo.php?url="+o}).done(function(a){$("#modalJogo").html(a),3==tipoUser&&(horaAbriuJogo=(new Date).getTime()),("17"===o||17===o&&1==tipoUser||2==tipoUser)&&$("#botaoAbreResposta").show()}).fail(function(){$("#modalJogo").html("Erro ao carregar o jogo. Tente novamente mais tarde. \n                                Se o erro persistir, comunique o professor ou o administrador")})}function verRespostaJogo(o){("17"===o||17===o&&1==tipoUser||2==tipoUser)&&(estaAbertaResposta?(estaAbertaResposta=!1,$("#respostaNaviosNoPorto").hide(),$("#respostaNaviosNoPorto img").attr("src",""),$("#botaoAbreResposta").html("VER RESPOSTA")):(estaAbertaResposta=!0,$("#respostaNaviosNoPorto").show(),$("#respostaNaviosNoPorto img").attr("src","dist/img/jogos/naviosNoPortoResposta.jpg"),$("#botaoAbreResposta").html("FECHA RESPOSTA")))}function fechaJogo(o){if(3==tipoUser){var a=(new Date).getTime();if(tempoDecorridoJogo=a-horaAbriuJogo,tempoDecorridoJogo>15e3){tempoDecorridoJogo/=1e3;var r=Math.round(tempoDecorridoJogo%60);tempoDecorridoJogo=Math.floor(tempoDecorridoJogo/60);var e=Math.round(tempoDecorridoJogo%60);tempoDecorridoJogo=Math.floor(tempoDecorridoJogo/60);var t=Math.round(tempoDecorridoJogo%24);tempoDecorridoJogo=Math.floor(tempoDecorridoJogo/24);var l=t+":"+e+":"+r;$.ajax({type:"POST",data:{id_jogo:o,id_aluno:null,id_usuario:idUser,id_turma:null,tempo:l,data:(new Date).getDate()},url:"funcoesControle.php?url=salvarRelatorio"}).done(function(o){""!=o&&alert("Erro ao salvar informações sobre sua atividade. Por favor, comunique seu professor ou o administrador.")}).fail(function(){alert("Erro ao salvar informações sobre sua atividade. Por favor, comunique seu professor ou o administrador.")})}}}function pesquisar(o){""!==o&&($(".breadcrumb").show(),$(".breadcrumb").html('<a href="" target="_parent">Voltar</a>'),$(".pagina").html("Carregando..."),$.ajax({type:"GET",data:{url:"pesquisarJogos",pesquisa:o},url:"funcoesControle.php"}).done(function(o){$(".pagina").html(o)}).fail(function(){alert("Desculpe, ocorreu um erro durante a pesquisa")}))}function planoDeAula(o){0==$("#bread").find("#breadPlanoDeAula").size()&&($(".breadcrumb").append('<li id="breadPlanoDeAula"><a href="#" onclick="planoDeAula('+o+')">Plano de Aula</a></li>'),$(".breadcrumb li:not(last-child) a").removeClass("active"),$(".breadcrumb li:last-child a").addClass("active")),$("#alunos").hide(),$("#planoDeAula").show(),atualizarJogosLiberados(o),atualizarJogosBloqueados(o)}function atualizarJogosLiberados(o){$.ajax({type:"GET",data:{url:"pegarJogosLiberados",turma:o},url:"funcoesControle.php"}).done(function(o){$("#jogosLiberados").html(o)}).fail(function(){$(".planoDeAula-alert").modal("show"),$("#erroPlanodeAula").html("Ocorreu um erro ao atualizar os jogos liberados.")})}function atualizarJogosBloqueados(o){$.ajax({type:"GET",data:{url:"pegarJogosBloqueados",turma:o},url:"funcoesControle.php"}).done(function(o){$("#jogosBloqueados").html(o)}).fail(function(){$(".planoDeAula-alert").modal("show"),$("#erroPlanodeAula").html("Ocorreu um erro ao atualizar os jogos bloqueados.")})}function bloquearJogo(o,a){$.ajax({type:"POST",data:{jogo:o,turma:a},url:"funcoesControle.php?url=bloquearJogo"}).done(function(o){"false"==o?($(".planoDeAula-alert").modal("show"),$("#erroPlanodeAula").html("Ocorreu um erro ao bloquear o jogo.")):(atualizarJogosLiberados(a),atualizarJogosBloqueados(a))}).fail(function(){$(".planoDeAula-alert").modal("show"),$("#erroPlanodeAula").html("Ocorreu um erro ao bloquear o jogo.")})}function liberarJogo(o,a){$.ajax({type:"POST",data:{jogo:o,turma:a},url:"funcoesControle.php?url=liberarJogo"}).done(function(o){"false"==o?($(".planoDeAula-alert").modal("show"),$("#erroPlanodeAula").html("Ocorreu um erro ao liberar o jogo.")):(atualizarJogosLiberados(a),atualizarJogosBloqueados(a))}).fail(function(){$(".planoDeAula-alert").modal("show"),$("#erroPlanodeAula").html("Ocorreu um erro ao liberar o jogo.")})}function rabiscarLinhasJogo(o,a){var r=new Array;$("#"+o+" "+a).click(function(){var o=r.indexOf(this);0>o?($(this).css("text-decoration","line-through"),r.push(this)):($(this).css("text-decoration","none"),r.splice(o,1))})}var tipoUser=$("input[name=tipo_user]").val(),idUser=$("input[name=id_user]").val(),horaAbriuJogo,tempoDecorridoJogo=new Date,estaAbertaResposta=!1;$("#modalTodosJogos").on("hidden.bs.modal",function(){var o=$("#idJogo").val();fechaJogo(o)});